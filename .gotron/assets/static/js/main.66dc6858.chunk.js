(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n=new WebSocket("ws://localhost:"+e.backendPort+"/web/app/events"),r={MESSAGE_RECEIVED:"MESSAGE_RECEIVED_GOTRON_EVENT",MESSAGE_SEND:"MESSAGE_SEND_GOTRON_EVENT",SET_USER:"SET_USER_GOTRON_EVENT",SET_USER_RESPONSE:"SET_USER_RESPONSE_GOTRON_EVENT",SET_OLD_LETTERS:"SET_OLD_LETTERS_GOTRON_EVENT",NETWORK_STATUS:"NETWORK_STATUS_GOTRON_EVENT",INTERFACE_READY:"INTERFACE_READY_GOTRON_EVENT",CLOSE_WINDOW:"CLOSE_WINDOW_GOTRON_EVENT",COM_PORTS_SETTINGS:"COM_PORTS_SETTINGS_GOTRON_EVENT",COM_PORTS_SETTINGS_CHANGE:"COM_PORTS_SETTINGS_CHANGE_GOTRON_EVENT"}}).call(this,a(18))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(72)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=(a(33),a(34),a(35),a(36),a(6)),s=r.a.createElement("svg",{width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrow-alt-circle-down",class:"svg-inline--fa fa-arrow-alt-circle-down fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z"})),i=r.a.createElement("svg",{width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrow-alt-circle-up",class:"svg-inline--fa fa-arrow-alt-circle-up fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm292 116V256h70.9c10.7 0 16.1-13 8.5-20.5L264.5 121.2c-4.7-4.7-12.2-4.7-16.9 0l-115 114.3c-7.6 7.6-2.2 20.5 8.5 20.5H212v116c0 6.6 5.4 12 12 12h64c6.6 0 12-5.4 12-12z"})),u=r.a.createElement("svg",{width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-double",className:"svg-inline--fa fa-check-double fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"})),m=a(1),d=a(2),f={email:"",collision:!1},E=r.a.createContext(f),v=function(e){var t=Object(n.useState)(f),a=Object(d.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)(function(){},[]),r.a.createElement(E.Provider,{value:[c,l]},e.children)},b=a(10),_=a(11),h=a(4),p=function(e){h.b.send(JSON.stringify({event:h.a.MESSAGE_SEND,letter:e}))},g=function(e){h.b.send(JSON.stringify({event:h.a.SET_USER,user:e}))},O=new(function(){function e(){Object(b.a)(this,e),this.listeners={}}return Object(_.a)(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"emit",value:function(e,t){this.listeners[e]&&this.listeners[e].forEach(function(e){e(t)})}},{key:"unsubscribeAll",value:function(e){this.listeners[e]=[]}}]),e}());h.b.onmessage=function(e){var t=JSON.parse(e.data);t.event&&(console.log("RECEIVED: ",t.event,"data: ",t),O.emit(t.event,t))},h.b.onopen=function(){h.b.send(JSON.stringify({event:h.a.INTERFACE_READY}))};var N=O,C=function(){var e=Object(n.useContext)(E),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(m.a)({},a,{setEmail:function(e){r(function(t){return Object(m.a)({},t,{email:e})}),g({email:e})},setCollision:function(e){r(function(t){return Object(m.a)({},t,{collision:e})})}})},w=(Date.now(),Date.now(),Date.now(),Date.now(),{letters:[],searchedLetters:[]}),S=r.a.createContext(w),j=function(e){var t=Object(n.useState)(w),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.a.createElement(S.Provider,{value:[c,l]},e.children)},T=function(){var e=Object(n.useContext)(S),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({substring:""}),l=Object(d.a)(c,2),o=l[0],s=l[1];function i(e){s({substring:e});var t=a.letters.filter(function(t){var a=t.author,n=t.responder,r=t.message,c=function(e,t){return-1!==e.toLowerCase().indexOf(t.toLowerCase())};return c(a,e)||c(n,e)||c(r,e)});r(function(e){return Object(m.a)({},e,{searchedLetters:t})})}function u(e){var t=a.letters.find(function(t){return t.id===e});return t||{author:"",message:"",responder:"",id:""}}return Object(m.a)({},a,{sendLetter:function(e){var t=a.letters;t.push(e),r(function(e){return Object(m.a)({},e,{letters:t})}),i(o.substring),p(e)},addLetter:function(e){var t=a.letters;console.log(t),t.push(e),console.log(t),r(function(e){return Object(m.a)({},e,{letters:t})}),i(o.substring)},deleteLetter:function(e){var t=a.letters,n=a.searchedLetters;console.log(t);var c=t.filter(function(t){return t.id!==e}),l=n.filter(function(t){return t.id!==e});r(function(e){return Object(m.a)({},e,{letters:c,searchedLetters:l})}),console.log(c)},findLetters:i,setLetters:function(e){var t=e;r(function(a){return Object(m.a)({},a,{searchedLetters:t,letters:e})})},getLetterByID:u,setLetterChecked:function(e){var t=a.letters,n=t.findIndex(function(t){return t.id===e});-1!==n&&(t[n].checked=!0,r(function(e){return Object(m.a)({},e,{letters:t})}))},sendCheckedSubEvent:function(e){var t=u(e),a=Object(m.a)({},t),n=a.author,r=a.responder;a.checkedSubEvent=!0,a.author=r,a.responder=n,p(a)}})},k=function(e){var t=e.id,a=e.author,n=e.message,c=e.responder,l=e.checked,o=C().email,m=T(),d=m.setLetterChecked,f=m.sendCheckedSubEvent,E=c===o,v=E?"dialog-mini__icon-in":"dialog-mini__icon-out",b=l?"dialog-mini__icon--checked":"dialog-mini__icon--unchecked";return r.a.createElement("div",{onClick:function(){E&&(f(t),d(t)),e.history.push("/letter/".concat(t))},className:"dialog-list__dialog-mini"},r.a.createElement("div",{className:v},E?s:i),r.a.createElement("div",{className:"dialog-mini__main"},r.a.createElement("div",{className:"dialog-mini__author"},a),r.a.createElement("div",{className:"dialog-mini__message"},n)),r.a.createElement("div",{className:b},u))};k.defaultProps={author:"Unknown",responder:"Unknown",message:"Empty",id:null};var L=Object(o.f)(function(e){return r.a.createElement(k,e)}),x=function(){var e=T().searchedLetters;return r.a.createElement("div",{className:"dialog-list"},e.sort(function(e,t){return e.date-t.date}).map(function(e){return r.a.createElement(L,Object.assign({key:e.id},e))}))};x.defaultProps={};var R=x,P=a(13),M=a(12),y=a(14),I=(a(45),a(46),a(3)),D=function(e){function t(){return Object(b.a)(this,t),Object(P.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement(I.b,{to:this.props.linkTo},r.a.createElement("div",{className:"settings-column__settings-item"},this.props.name))}}]),t}(r.a.Component);D.defaultProps={name:"Unknown",linkTo:"/"};var A=Object(o.f)(function(e){return r.a.createElement(D,e)}),G=[{name:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 COM-\u043f\u043e\u0440\u0442\u043e\u0432",linkTo:"/settings/ports"}],V=function(e){function t(){return Object(b.a)(this,t),Object(P.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"left-column__settings-column"},this.props.settingsItems.map(function(e){return r.a.createElement(A,e)}))}}]),t}(r.a.Component);V.defaultProps={settingsItems:G};var U=V,z=(a(47),r.a.createElement("svg",{"aria-hidden":"true",width:"32",height:"32",focusable:"false","data-prefix":"fas","data-icon":"comments",className:"svg-inline--fa fa-comments fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},r.a.createElement("path",{fill:"currentColor",d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"}))),B=r.a.createElement("svg",{"aria-hidden":"true",width:"32",height:"32",focusable:"false","data-prefix":"fas","data-icon":"cog",className:"svg-inline--fa fa-cog fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"})),W=r.a.createElement("svg",{"aria-hidden":"true",width:"32",height:"32",focusable:"false","data-prefix":"fas","data-icon":"address-book",className:"svg-inline--fa fa-address-book fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},r.a.createElement("path",{fill:"currentColor",d:"M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-228-32c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zm112 236.8c0 10.6-10 19.2-22.4 19.2H118.4C106 384 96 375.4 96 364.8v-19.2c0-31.8 30.1-57.6 67.2-57.6h5c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h5c37.1 0 67.2 25.8 67.2 57.6v19.2z"})),H=a(24),J=function(e){function t(){return Object(b.a)(this,t),Object(P.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname,t=e.match(/\/users/gi),a=e.match(/\/settings/gi),n=!(a||t),c=H({"tab-bar__users-tab":!0,"tab-bar__tab--checked":t}),l=H({"tab-bar__dialogs-tab":!0,"tab-bar__tab--checked":n}),o=H({"tab-bar__settings-tab":!0,"tab-bar__tab--checked":a});return r.a.createElement("div",{className:"left-column__tab-bar"},r.a.createElement(I.b,{to:"/users"},r.a.createElement("div",{className:c},W)),r.a.createElement(I.b,{to:"/"},r.a.createElement("div",{className:l},z)),r.a.createElement(I.b,{to:"/settings"},r.a.createElement("div",{className:o},B)))}}]),t}(r.a.Component);J.defaultProps={};var F=Object(o.f)(function(e){return r.a.createElement(J,e)}),K=(a(48),r.a.createElement("svg",{width:"20",height:"20","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"globe-americas",class:"svg-inline--fa fa-globe-americas fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"},r.a.createElement("path",{fill:"currentColor",d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm82.29 357.6c-3.9 3.88-7.99 7.95-11.31 11.28-2.99 3-5.1 6.7-6.17 10.71-1.51 5.66-2.73 11.38-4.77 16.87l-17.39 46.85c-13.76 3-28 4.69-42.65 4.69v-27.38c1.69-12.62-7.64-36.26-22.63-51.25-6-6-9.37-14.14-9.37-22.63v-32.01c0-11.64-6.27-22.34-16.46-27.97-14.37-7.95-34.81-19.06-48.81-26.11-11.48-5.78-22.1-13.14-31.65-21.75l-.8-.72a114.792 114.792 0 0 1-18.06-20.74c-9.38-13.77-24.66-36.42-34.59-51.14 20.47-45.5 57.36-82.04 103.2-101.89l24.01 12.01C203.48 89.74 216 82.01 216 70.11v-11.3c7.99-1.29 16.12-2.11 24.39-2.42l28.3 28.3c6.25 6.25 6.25 16.38 0 22.63L264 112l-10.34 10.34c-3.12 3.12-3.12 8.19 0 11.31l4.69 4.69c3.12 3.12 3.12 8.19 0 11.31l-8 8a8.008 8.008 0 0 1-5.66 2.34h-8.99c-2.08 0-4.08.81-5.58 2.27l-9.92 9.65a8.008 8.008 0 0 0-1.58 9.31l15.59 31.19c2.66 5.32-1.21 11.58-7.15 11.58h-5.64c-1.93 0-3.79-.7-5.24-1.96l-9.28-8.06a16.017 16.017 0 0 0-15.55-3.1l-31.17 10.39a11.95 11.95 0 0 0-8.17 11.34c0 4.53 2.56 8.66 6.61 10.69l11.08 5.54c9.41 4.71 19.79 7.16 30.31 7.16s22.59 27.29 32 32h66.75c8.49 0 16.62 3.37 22.63 9.37l13.69 13.69a30.503 30.503 0 0 1 8.93 21.57 46.536 46.536 0 0 1-13.72 32.98zM417 274.25c-5.79-1.45-10.84-5-14.15-9.97l-17.98-26.97a23.97 23.97 0 0 1 0-26.62l19.59-29.38c2.32-3.47 5.5-6.29 9.24-8.15l12.98-6.49C440.2 193.59 448 223.87 448 256c0 8.67-.74 17.16-1.82 25.54L417 274.25z"}))),Y=r.a.createElement("svg",{width:"24",height:"24","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"envelope",className:"svg-inline--fa fa-envelope fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"})),q={availableUsers:[],connection:!1},Q=r.a.createContext(q),X=function(e){var t=Object(n.useState)(q),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.a.createElement(Q.Provider,{value:[c,l]},e.children)},Z=function(){var e=Object(n.useContext)(Q),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(m.a)({},a,{setConnection:function(e){r(function(t){return Object(m.a)({},t,{connection:e})})},setAvailableUsers:function(e){r(function(t){return Object(m.a)({},t,{availableUsers:e})})}})},$=a(24),ee=function(e){var t=Z().connection,a=$({"status-bar__button":!0,"status-bar__connection--connected":t,"status-bar__connection--disconnected":!t}),n=$({"status-bar__button":!0,"status-bar__new-letter--connected":t,"status-bar__new-letter--disconnected":!t}),c=T().findLetters;return r.a.createElement("div",{className:"left-column__status-bar"},r.a.createElement("input",{type:"text",className:"status-bar__search",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){return c(e.currentTarget.value)}}),r.a.createElement("div",{className:a},K),r.a.createElement(I.b,{to:"/letter/new"},r.a.createElement("div",{className:n},Y)))};ee.defaultProps={};var te=ee,ae=(a(49),a(50),function(e){var t=e.email;return r.a.createElement("div",{className:"user-list__user-mini"},r.a.createElement("div",{className:"user-mini__email"},t))});ae.defaultProps={email:"Unknown"};var ne=ae,re=function(){var e=Z().availableUsers;return r.a.createElement("div",{className:"user-list"},e.map(function(e){return r.a.createElement(ne,Object.assign({key:e.email},e))}))};re.defaultProps={};var ce=re,le=function(){return C().email?r.a.createElement("div",{className:"left-column"},r.a.createElement(te,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/settings",render:function(){return r.a.createElement(U,null)}}),r.a.createElement(o.b,{path:"/users",render:function(){return r.a.createElement(ce,null)}}),r.a.createElement(o.b,{render:function(){return r.a.createElement(R,null)}})),r.a.createElement(F,null)):r.a.createElement(o.a,{to:"/auth"})};le.defaultProps={};var oe=le,se=(a(51),a(52),a(53),function(e){var t=T().deleteLetter,a=Object(n.useState)({redirect:null}),c=Object(d.a)(a,2),l=c[0],s=c[1],i=e.id;return l.redirect?r.a.createElement(o.a,{to:l.redirect}):r.a.createElement("div",{className:"letter-reading__tool-panel"},r.a.createElement("a",{onClick:function(){t(i),s({redirect:"/"})},className:"tool-panel__delete-button"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(I.b,{to:"/letter/new?action=forward&id=".concat(i)},r.a.createElement("a",{className:"tool-panel__forward-button"},"\u041f\u0435\u0440\u0435\u0441\u043b\u0430\u0442\u044c")),r.a.createElement(I.b,{to:"/letter/new?action=reply&id=".concat(i)},r.a.createElement("a",{className:"tool-panel__reply-button"},"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c")))});se.defaultProps={id:null};var ie=se,ue=function(e){var t=T().getLetterByID,a=e.match.params.id,n=t(a),c=n.author,l=n.message,o=n.responder,s=C().email===c,i=s?"\u041a\u043e\u043c\u0443:":"\u041e\u0442 \u043a\u043e\u0433\u043e:",u=s?o:c;return r.a.createElement("div",{className:"right-column__letter-reading"},r.a.createElement("div",{className:"letter-reading__content"},r.a.createElement("div",{className:"letter-reading__info"},r.a.createElement("div",{className:"letter-reading__author"},r.a.createElement("div",{className:"letter-reading__author__label"},i),r.a.createElement("div",{className:"letter-reading__author__name"},u))),r.a.createElement("div",{className:"letter-reading__message"},l)),r.a.createElement(ie,{id:a}))};ue.defaultProps={};var me=ue,de=(a(54),function(e){function t(){return Object(b.a)(this,t),Object(P.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"right-column__detailed-settings"},r.a.createElement("div",null,"\u0417\u0434\u0435\u0441\u044c \u043f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 :("))}}]),t}(r.a.Component));de.defaultProps={};var fe=de,Ee=a(15),ve=(a(55),{inCom:{name:"COM1",speed:115200},outCom:{name:"COM1",speed:115200},ports:["COM1","COM2","COM3","COM4","COM5"]}),be=r.a.createContext(ve),_e=function(e){var t=Object(n.useState)(ve),a=Object(d.a)(t,2),c=a[0],l=a[1];return r.a.createElement(be.Provider,{value:[c,l]},e.children)},he=function(){var e=Object(n.useContext)(be),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(m.a)({},a,{setInCom:function(e){r(function(t){return Object(m.a)({},t,{inCom:e})})},setOutCom:function(e){r(function(t){return Object(m.a)({},t,{outCom:e})})},setPorts:function(e){r(function(t){return Object(m.a)({},t,{ports:e})})},mergeState:function(e){r(function(t){return Object(m.a)({},t,e)})}})},pe=function(e){return"".concat(e,"\u0431\u0438\u0442/\u0441")},ge=function(e,t){return Number(e)===Number(t)},Oe=function(e,t){return String(e)===String(t)},Ne=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return e.map(function(e){return r.a.createElement("option",{selected:a(e,t),value:e},n(e))})},Ce=function(e){var t=e.speeds,a=he(),c=a.ports,l=a.inCom,o=a.outCom,s=a.setInCom,i=a.setOutCom,u=Object(n.useState)({inCom:l,outCom:o}),f=Object(d.a)(u,2),E=f[0],v=f[1],b=function(e){var t=e.currentTarget,a=t.dataset,n=t.value,r=a.field,c=a.port,l=Object(m.a)({},E[c],Object(Ee.a)({},r,n));v(Object(m.a)({},E,Object(Ee.a)({},c,l)))};return r.a.createElement("div",{className:"right-column__detailed-settings"},r.a.createElement("div",{className:"detailed-settings__com-ports"},r.a.createElement("form",{id:"com-ports-form"},r.a.createElement("h2",{className:"com-ports__title"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 COM-\u043f\u043e\u0440\u0442\u044b"),r.a.createElement("div",null,r.a.createElement("label",{className:"com-ports__label",htmlFor:"InComName"},"\u0412\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043f\u043e\u0440\u0442"),r.a.createElement("select",{id:"InComName","data-port":"inCom","data-field":"name",onChange:b},Ne(c,E.inCom.name,Oe)),r.a.createElement("select",{className:"com-ports__speed","data-port":"inCom","data-field":"speed",onChange:b},Ne(t,E.inCom.speed,ge,pe))),r.a.createElement("div",null,r.a.createElement("label",{className:"com-ports__label",htmlFor:"OutComName"},"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043f\u043e\u0440\u0442"),r.a.createElement("select",{id:"OutComName","data-port":"outCom","data-field":"name",onChange:b},Ne(c,E.outCom.name,Oe)),r.a.createElement("select",{className:"com-ports__speed","data-port":"outCom","data-field":"speed",onChange:b},Ne(t,E.outCom.speed,ge,pe))),r.a.createElement("a",{className:"com-ports__apply-button",onClick:function(){var e,t=E.inCom,a=E.outCom;s(t),i(a),t.speed=+t.speed,a.speed=+a.speed,e={ports:c,inCom:t,outCom:a},h.b.send(JSON.stringify({event:h.a.COM_PORTS_SETTINGS_CHANGE,comPortsSettings:e}))}},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))))};Ce.defaultProps={speeds:[50,75,110,150,300,600,1200,2400,4800,9600,19200,38400,57600,115200].reverse()};var we=Ce,Se=(a(56),a(57),function(e){return r.a.createElement("div",{className:"letter-writing__tool-panel"},r.a.createElement("a",{className:"tool-panel__send-button",onClick:e.onSendPressed},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),r.a.createElement("a",{className:"tool-panel__cancel-button"},r.a.createElement(I.b,{to:"/"},"\u041e\u0442\u043c\u0435\u043d\u0430")))});Se.defaultProps={onSendPressed:function(){return null}};var je=Se,Te=(a(58),function(e){var t=e.message;return r.a.createElement("div",{className:"right-column__information"},t)});Te.defaultProps={message:"\u041d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e"};var ke=Te,Le=a(27),xe=a.n(Le),Re=function(e){var t=T(),a=t.sendLetter,c=t.getLetterByID,l=Object(n.useState)({responder:"",message:"",redirect:null}),s=Object(d.a)(l,2),i=s[0],u=s[1];Object(n.useEffect)(function(){var t=e.location.search,a=xe.a.parse(t),n=a.action,r=a.id;if(n&&r){var l="reply"===n?"author":"message",o="reply"===n?"responder":"message",s=c(r);console.log(s[l]),u(function(e){return Object(m.a)({},e,Object(Ee.a)({},o,s[l]))})}},[]);var f=C().email,E=Z(),v=E.connection,b=E.availableUsers,_=function(e){var t=e.currentTarget,a=t.dataset.name,n=t.value;u(Object(m.a)({},i,Object(Ee.a)({},a,n)))};return i.redirect?r.a.createElement(o.a,{to:"/"}):v?r.a.createElement("div",{className:"right-column__letter-writing"},r.a.createElement("div",{className:"letter-writing__content"},r.a.createElement("label",{htmlFor:"new-letter-to-input",className:"letter-writing__info"},r.a.createElement("div",{className:"letter-writing__to"},r.a.createElement("div",{className:"letter-writing__to__label"},"\u041a\u043e\u043c\u0443:"),r.a.createElement("input",{id:"new-letter-to-input",onChange:_,value:i.responder,"data-name":"responder",className:"letter-writing__to__input",type:"text"}))),r.a.createElement("textarea",{onChange:_,"data-name":"message",className:"letter-writing__message",value:i.message,type:"text"})),r.a.createElement(je,{onSendPressed:function(){var e=i.responder,t=i.message;if(!b.map(function(e){return e.email}).includes(e))return console.log("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0432 \u0441\u0435\u0442\u0438!",b,e),void alert("\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u0442 \u0432 \u0441\u0435\u0442\u0438!");var n=function(e){var t=Date.now(),a=1e3*Math.random();return"".concat(t).concat(a).concat(e)}(e),r=f,c=Date.now();a({id:n,responder:e,message:t,author:r,date:c,checkedSubEvent:!1,checked:!1}),u(Object(m.a)({},i,{redirect:!0}))}})):r.a.createElement(ke,{message:"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0442\u044c\u044e"})};Re.defaultProps={};var Pe=Object(o.f)(function(e){return r.a.createElement(Re,e)}),Me=function(){return r.a.createElement("div",{className:"right-column"},r.a.createElement(o.b,{path:"/letter/new",render:function(){return r.a.createElement(Pe,null)}}),r.a.createElement(o.b,{path:"/letter/:id",component:me}),r.a.createElement(o.b,{exact:!0,path:"/settings",render:function(){return r.a.createElement(fe,null)}}),r.a.createElement(o.b,{exact:!0,path:"/settings/ports",render:function(){return r.a.createElement(we,null)}}))};Me.defaultProps={};var ye=Me,Ie=(a(70),function(){var e=C(),t=e.email,a=e.setEmail,c=e.collision,l=e.setCollision,s=Object(n.useState)(t),i=Object(d.a)(s,2),u=i[0],m=i[1],f=Object(n.useState)(!1),E=Object(d.a)(f,2),v=E[0],b=E[1];Object(n.useEffect)(function(){N.on(h.a.SET_USER_RESPONSE,function(e){e.status?b(!0):l(!0)})},[]);if(v)return r.a.createElement(o.a,{to:"/"});var _=c?"\u0422\u0430\u043a\u043e\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0441\u0435\u0442\u0438. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 email":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f";return r.a.createElement("div",{className:"auth"},r.a.createElement("h2",{className:"auth__header"},_),r.a.createElement("input",{onChange:function(e){var t=e.currentTarget.value;m(t)},className:"auth__email-input",type:"text",placeholder:"Email",value:u}),r.a.createElement("a",{onClick:function(){u&&a(u)},className:"auth__submit-button"},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"))});Ie.defaultProps={};var De=Ie,Ae=(a(71),function(e){return r.a.createElement(X,null,r.a.createElement(v,null,r.a.createElement(j,null,r.a.createElement(_e,null,e.children))))}),Ge=function(){var e=Z(),t=e.setAvailableUsers,a=e.setConnection,r=T(),c=r.letters,l=r.addLetter,o=r.setLetterChecked,s=r.setLetters,i=he(),u=i.inCom,m=i.outCom,d=i.ports,f=i.mergeState;return window.addEventListener("beforeunload",function(){h.b.send(JSON.stringify({event:h.a.CLOSE_WINDOW}))}),Object(n.useEffect)(function(){N.on(h.a.NETWORK_STATUS,function(e){t(e.networkStatus.availableUsers),a(e.networkStatus.connection)})},[]),Object(n.useEffect)(function(){N.on(h.a.SET_OLD_LETTERS,function(e){console.log(e.letters),s(e.letters)})},[]),Object(n.useEffect)(function(){var e=h.a.MESSAGE_RECEIVED;N.unsubscribeAll(e),N.on(e,function(e){var t=e.letter;t.checkedSubEvent?o(t.id):l(t)})},[c]),Object(n.useEffect)(function(){var e=h.a.COM_PORTS_SETTINGS;N.unsubscribeAll(e),N.on(e,function(e){console.log("RECEIVED COM-ports UPDATE: ",e.comPortsSettings),f(e.comPortsSettings)})},[u,m,d]),null},Ve=function(){return r.a.createElement(Ae,null,r.a.createElement(Ge,null),r.a.createElement("div",{className:"App"},r.a.createElement(I.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/auth",render:function(){return r.a.createElement(De,null)}}),r.a.createElement(o.b,{render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(ye,null))}})))))};l.a.render(r.a.createElement(Ve,null),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.66dc6858.chunk.js.map